# 공통과제1 보고서

## 1. 개요

0부터 n 사이의 임의의 정수를 반환하는 랜덤 함수의 최적화에 관한 내용입니다. 초기 함수와 최적화된 함수의 구현 방식, 성능 차이, 시간 복잡도 등을 비교 분석합니다.

## 2. 문제 정의

1. **get_1_or_0 함수**:
    - 0 또는 1을 임의로 반환하는 함수

2. **get_random 함수**:
    - 0부터 n까지의 임의의 정수를 반환하는 함수
    - get_1_or_0 함수만을 사용하여 구현
    - 직접적인 난수 생성 함수 사용 금지

### 2.1 제약 조건

- get_random 함수는 get_1_or_0 함수를 이용해야 함
- n이 매우 큰 값일 때도 효율적으로 동작해야 함


## 3. 초기 구현 방식 (get_random)

```javascript
const get_1_or_0 = () => Math.random() < 0.5 ? 1 : 0;

const get_random = (n) => {
    let result = 0;
    for(let i = 0; i < n; i++) result += get_1_or_0();
    return result;
}
```

### 3.1 초기 구현 방식의 특징

- **동작 원리**: n번 반복하면서 get_1_or_0 함수를 호출하고, 그 결과를 누적
- **시간 복잡도**: O(n) - n의 크기에 비례하여 연산량이 증가
- **범위 한계**: n이 커질수록 효율이 매우 떨어짐

### 3.2 기존 구현의 문제점

1. **효율성 문제**: n이 큰 값일 경우 매우 비효율적
2. **균등한 확률이 아님**: 숫자를 더해가는 것이기 때문에 모든 숫자가 균등한 확률로 나올 수 없음


## 4. 최적화를 위한 사고 단계
### 4.1 기존 문제점 해결 방향 설정  

1. **효율성 향상 전략**:
    - O(n)에서 O(log n)으로 시간 복잡도 개선
    - 비트는 이어 붙이면 큰숫자 제작 가능
    - n이 큰 값 해결 

2. **균등 확률**:
    - 각 비트 위치에서 0과 1의 확률을 50%로 유지
    - n보다 큰 값이 나올 경우 전체 재생성
    - 균등 확률 해결

**즉 비트를 사용하면 됨**


## 5. 최적화된 구현 방식 (get_random2)

```javascript
const get_random2 = (n) => {
    if (n <= 0) return 0;
    
    // 필요한 비트 수 
    const bits = n.toString(2).length; //O(log n)
    let result;
    do {
        num++;
        result = 0;
        for (let i = 0; i < bits; i++) {
            result = (result << 1) | get_1_or_0();
        }
    } while (result > n); 
    return result;
};
```

### 5.1 최적화된 구현 방식의 특징

- **동작 원리**: 비트 단위로 랜덤값 생성 (이진수 표현 활용)
- **시간 복잡도**: 
  - 평균적으로 O(log n) - n을 표현하는 데 필요한 비트 수에 비례
  - 최악의 경우 반복 횟수에 따라 증가할 수 있음
- **확률**: 0부터 n까지의 모든 정수가 균등한 확률로 발생
- **범위**: n의 크기에 관계없이 효율적으로 동작

### 5.2 최적화 방법

1. **비트 단위 접근**:
   - n을 이진수로 표현했을 때 필요한 비트 수 계산
   - 각 비트를 50% 확률로 1 또는 0으로 설정하는 방식

2. **범위 조정**:
   - 생성된 값이 n보다 크면 재시도하는 방식으로 범위 조정
   - 이를 통해 0부터 n까지의 균등한 확률 보장

3. **비트 연산 활용**:
   - 왼쪽 시프트(<<)와 OR 연산(|)을 활용하여 효율적인 비트 조작

## 5. 성능 비교

```javascript
// 성능 테스트 결과
performanceTest(get_random, 214748);  // 평균 실행 시간: 2.2209 ms
performanceTest(get_random2, 214748); // 평균 실행 시간: 0.0011 ms
```

- **get_random**: 평균 실행 시간 약 2.2209 ms
- **get_random2**: 평균 실행 시간 약 0.0011 ms
- **성능 향상**: 약 2018.99배 빠름
- **최대 n값**: 2147483647 이 이상은 BigInt로 표현해야함




